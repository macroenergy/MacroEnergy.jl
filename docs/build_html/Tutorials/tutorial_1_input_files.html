<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Input Files · Macro</title><meta name="title" content="Input Files · Macro"/><meta property="og:title" content="Input Files · Macro"/><meta property="twitter:title" content="Input Files · Macro"/><meta name="description" content="Documentation for Macro."/><meta property="og:description" content="Documentation for Macro."/><meta property="twitter:description" content="Documentation for Macro."/><meta property="og:url" content="https://macroenergy.github.io/Macro/stable/Tutorials/tutorial_1_input_files.html"/><meta property="twitter:url" content="https://macroenergy.github.io/Macro/stable/Tutorials/tutorial_1_input_files.html"/><link rel="canonical" href="https://macroenergy.github.io/Macro/stable/Tutorials/tutorial_1_input_files.html"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">Macro</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><input class="collapse-toggle" id="menuitem-1" type="checkbox"/><label class="tocitem" for="menuitem-1"><span class="docs-label">Welcome to Macro</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../index.html">Introduction</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Getting Started</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Getting Started/overview.html">Overview</a></li><li><a class="tocitem" href="../Getting Started/installation.html">Installation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="tutorial_0_getting_started.html">Getting Started</a></li><li class="is-active"><a class="tocitem" href="tutorial_1_input_files.html">Input Files</a><ul class="internal"><li><a class="tocitem" href="#System-configuration"><span>System configuration</span></a></li><li><a class="tocitem" href="#Assets/technologies"><span>Assets/technologies</span></a></li><li><a class="tocitem" href="#Model-settings"><span>Model settings</span></a></li><li><a class="tocitem" href="#Summary"><span>Summary</span></a></li></ul></li><li><a class="tocitem" href="tutorial_2_running_macro.html">Running Macro</a></li><li><a class="tocitem" href="tutorial_3_multisector_modelling.html">Multisector Modelling</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">User Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../User Guide/sectors.html">Sectors</a></li><li><a class="tocitem" href="../User Guide/input_data.html">Input Data</a></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Assets</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../User Guide/assets/introduction.html">MACRO Asset Library</a></li><li><a class="tocitem" href="../User Guide/assets/battery.html">Battery</a></li><li><a class="tocitem" href="../User Guide/assets/beccselectricity.html">BECCS Electricity</a></li><li><a class="tocitem" href="../User Guide/assets/beccshydrogen.html">BECCS Hydrogen</a></li><li><a class="tocitem" href="../User Guide/assets/electricdac.html">Electric DAC</a></li><li><a class="tocitem" href="../User Guide/assets/electrolyzer.html">Electrolyzer</a></li><li><a class="tocitem" href="../User Guide/assets/fuelcell.html">Fuel Cell</a></li><li><a class="tocitem" href="../User Guide/assets/gasstorage.html">Gas Storage</a></li><li><a class="tocitem" href="../User Guide/assets/hydrogenline.html">Hydrogen Line</a></li><li><a class="tocitem" href="../User Guide/assets/hydropower.html">Hydro Reservoir</a></li><li><a class="tocitem" href="../User Guide/assets/mustrun.html">Must Run</a></li><li><a class="tocitem" href="../User Guide/assets/natgasdaq.html">Natural Gas DAC</a></li><li><a class="tocitem" href="../User Guide/assets/powerline.html">Power Line</a></li><li><a class="tocitem" href="../User Guide/assets/thermalhydrogen.html">Thermal Hydrogen Plant (with and without CCS)</a></li><li><a class="tocitem" href="../User Guide/assets/thermalpower.html">Thermal Power Plant (with and without CCS)</a></li><li><a class="tocitem" href="../User Guide/assets/vre.html">Variable Renewable Energy resources (VRE)</a></li></ul></li><li><a class="tocitem" href="../User Guide/constraints.html">Constraints</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Modeler Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Modeler Guide/build_sectors.html">How to build a sector</a></li><li><a class="tocitem" href="../Modeler Guide/create_example_case.html">How to create an example case</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Developer Guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Developer Guide/type_hierarchy.html">Type hierarchy</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">References</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../References/macro_objects.html">Macro Objects</a></li><li><a class="tocitem" href="../References/assets.html">Asset Library</a></li><li><a class="tocitem" href="../References/utilities.html">Utilities</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href="tutorial_1_input_files.html">Input Files</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="tutorial_1_input_files.html">Input Files</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/macroenergy/Macro" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/macroenergy/Macro/blob/main/docs/src/Tutorials/tutorial_1_input_files.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="MACRO-input-files"><a class="docs-heading-anchor" href="#MACRO-input-files">MACRO input files</a><a id="MACRO-input-files-1"></a><a class="docs-heading-anchor-permalink" href="#MACRO-input-files" title="Permalink"></a></h1><div class="admonition is-info"><header class="admonition-header">Interactive Notebook</header><div class="admonition-body"><p>The interactive version of this tutorial can be found <a href="https://github.com/macroenergy/Macro/tree/main/tutorials/tutorial_1_input_files.ipynb">here</a>.</p></div></div><p>To configure a MACRO case, the user needs to provide a set of input files describing at least the following components:</p><ul><li><strong>System configuration</strong></li><li><strong>Assets/technologies</strong></li><li><strong>Model settings</strong></li></ul><div class="admonition is-warning"><header class="admonition-header">Remove comments from JSON files</header><div class="admonition-body"><p>The comments in the JSON files below are only for the user&#39;s reference and should be removed before using them as input for a MACRO case.</p></div></div><h2 id="System-configuration"><a class="docs-heading-anchor" href="#System-configuration">System configuration</a><a id="System-configuration-1"></a><a class="docs-heading-anchor-permalink" href="#System-configuration" title="Permalink"></a></h2><p>The system configuration files are located in the <code>system</code> folder and include the following five files:</p><ul><li><code>commodities.json</code>: describes the commodities flowing through the system.</li><li><code>time_data.json</code>: describes the temporal resolution for each sector in the simulation.</li><li><code>nodes.json</code>: describes the nodes in the system.</li><li><code>demand.csv</code>: describes the demand for each commodity at each node in the system.</li><li><code>fuel_prices.csv</code>: (<code>supply_data</code>) describes the fuel prices for each commodity at each node in the system.</li></ul><h4 id="commodities.json"><a class="docs-heading-anchor" href="#commodities.json"><code>commodities.json</code></a><a id="commodities.json-1"></a><a class="docs-heading-anchor-permalink" href="#commodities.json" title="Permalink"></a></h4><p>The <code>commodities.json</code> file is a JSON file with a list of commodities to include in the case. This is how the file looks like:</p><pre><code class="language-julia hljs">s = read(&quot;one_zone_electricity_only/system/commodities.json&quot;, String)
println(s)</code></pre><p>To include new commodities, the user just needs to add the new commodity to the list of commodities in the <code>commodities.json</code> file.</p><h3 id="time_data.json"><a class="docs-heading-anchor" href="#time_data.json"><code>time_data.json</code></a><a id="time_data.json-1"></a><a class="docs-heading-anchor-permalink" href="#time_data.json" title="Permalink"></a></h3><p>This file describes the temporal resolution of the simulation. It contains three main parameters:</p><ul><li><code>PeriodLength</code>: total number of hours in the simulation.</li><li><code>HoursPerTimeStep</code>: number of hours in each time step.</li><li><code>HoursPerSubperiod</code>: number of hours in each subperiod, where a subperiod represents a time slice of the simulation used to perform time wrapping for time-coupling constraints (see, for example, <a href="../References/utilities.html#Macro.timestepbefore">Macro.timestepbefore</a>).</li></ul><p>Except for the <code>PeriodLength</code>, all the other parameters need to be provided for each commodity in the system. For example, the following is a complete example of the <code>time_data.json</code> file:</p><pre><code class="language-json hljs">{
    &quot;PeriodLength&quot;: 8760,   // units: hours
    &quot;HoursPerTimeStep&quot;: {
        &quot;Electricity&quot;: 1,  // units: hours
        &quot;NaturalGas&quot;: 1,
        &quot;CO2&quot;: 1
    },
    &quot;HoursPerSubperiod&quot;: {
        &quot;Electricity&quot;: 8760,  // units: hours
        &quot;NaturalGas&quot;: 8760,
        &quot;CO2&quot;: 8760
    }
}</code></pre><p>In the example above, the simulation will run for 8760 hours (one year), with one hour per time step and one hour per subperiod for each commodity (single subperiod).</p><h3 id="Units"><a class="docs-heading-anchor" href="#Units">Units</a><a id="Units-1"></a><a class="docs-heading-anchor-permalink" href="#Units" title="Permalink"></a></h3><p>In MACRO, everything that is transformed into electricity is expressed in MWh, and all the other commodities are expressed in metric tons:</p><ul><li><strong>Time</strong>: hours</li><li><strong>Electricity</strong>: MWh</li><li><strong>NaturalGas</strong>: MWh</li><li><strong>Coal</strong>: MWh</li><li><strong>Uranium</strong>: MWh</li><li><strong>Hydrogen</strong>: MWh</li><li><strong>CO2</strong>: tonnes</li><li><strong>CO2Captured</strong>: tonnes</li><li><strong>Biomass</strong>: tonnes</li></ul><h3 id="nodes.json"><a class="docs-heading-anchor" href="#nodes.json"><code>nodes.json</code></a><a id="nodes.json-1"></a><a class="docs-heading-anchor-permalink" href="#nodes.json" title="Permalink"></a></h3><p>The <code>nodes.json</code> file is a JSON file with a list of nodes to include in the case. The file is structured as follows:</p><ol><li>Each node type (like &quot;NaturalGas&quot;) is defined as a dictionary with three main components:<ul><li><code>type</code>: The category of the node (e.g., &quot;NaturalGas&quot;)</li><li><code>global_data</code>: attributes that apply to all instances of this node type<ul><li><code>time_interval</code>: time resolution for the time series in the node (needs to match one of the commodities in the <code>time_data.json</code> file)</li></ul></li><li><code>instance_data</code>: A list of specific nodes of this type, each with:<ul><li><code>id</code>: A unique identifier for the node</li></ul></li></ul></li></ol><p>All other fields (e.g, <code>demand</code>, <code>price</code>, <code>constraints</code>, etc.) are optional and will take the default values if not provided. A complete list of the fields that can be included in the <code>nodes.json</code> file can be found here <code>Macro.Node</code>(@ref).</p><p>Here&#39;s a simplified example:</p><pre><code class="language-json hljs">&quot;nodes&quot;: [
    {
        &quot;type&quot;: &quot;NaturalGas&quot;,
        &quot;global_data&quot;: {
            &quot;time_interval&quot;: &quot;NaturalGas&quot;
        },
        &quot;instance_data&quot;: [
            {
                &quot;id&quot;: &quot;natgas_1&quot;,
                &quot;price&quot;: {
                    &quot;timeseries&quot;: {
                        &quot;path&quot;: &quot;system/fuel_prices.csv&quot;,
                        &quot;header&quot;: &quot;natgas_1&quot;
                    }
                }
            },
            {
                &quot;id&quot;: &quot;natgas_2&quot;,
                &quot;price&quot;: {
                    &quot;timeseries&quot;: {
                        &quot;path&quot;: &quot;system/fuel_prices.csv&quot;,
                        &quot;header&quot;: &quot;natgas_2&quot;
                    }
                }
            }
            // ... more instances ...
        ]
    }
]</code></pre><p>This structure allows you to define multiple nodes of the same type while sharing common settings through <code>global_data</code>. </p><p>The following is a slightly more complete example of how to include nodes of type &quot;Electricity&quot;, containing the electricity demand at each node in the system:</p><pre><code class="language-json hljs">{
    &quot;type&quot;: &quot;Electricity&quot;,
    &quot;global_data&quot;: {
        &quot;time_interval&quot;: &quot;Electricity&quot;,
        &quot;constraints&quot;: {
            &quot;BalanceConstraint&quot;: true,
        }
    },
    &quot;instance_data&quot;: [
        {
            &quot;id&quot;: &quot;elec_SE&quot;,
            &quot;demand&quot;: {
                &quot;timeseries&quot;: {
                    &quot;path&quot;: &quot;system/demand.csv&quot;,
                    &quot;header&quot;: &quot;Demand_MW_z1&quot;
                }
            }
        },
        {
            &quot;id&quot;: &quot;elec_MIDAT&quot;,
            &quot;demand&quot;: {
                &quot;timeseries&quot;: {
                    &quot;path&quot;: &quot;system/demand.csv&quot;,
                    &quot;header&quot;: &quot;Demand_MW_z2&quot;
                }
            }
        },
        {
            &quot;id&quot;: &quot;elec_NE&quot;,
            &quot;demand&quot;: {
                &quot;timeseries&quot;: {
                    &quot;path&quot;: &quot;system/demand.csv&quot;,
                    &quot;header&quot;: &quot;Demand_MW_z3&quot;
                }
            }
        }
    ]
}</code></pre><p>As mentioned before, <strong>Demand</strong> and <strong>price</strong> time series are linked to columns in the <code>demand</code> and <code>fuel_prices</code> files respectively. The user needs to make sure that the <strong>path</strong> matches the file location and the <strong>header</strong> matches the column name in the file. In the case above, for example, the node <code>elec_SE</code> is linked to the column <code>Demand_MW_z1</code> in the <code>demand.csv</code> file, the node <code>elec_MIDAT</code> to the column <code>Demand_MW_z2</code>, and the node <code>elec_NE</code> to the column <code>Demand_MW_z3</code>.  In particular, the <code>demand.csv</code> file has the following structure:</p><pre><code class="language-julia hljs">using CSV, DataFrames
demand_data = CSV.read(&quot;one_zone_electricity_only/system/demand.csv&quot;, DataFrame)
first(demand_data, 10)</code></pre><h4 id="Constraints"><a class="docs-heading-anchor" href="#Constraints">Constraints</a><a id="Constraints-1"></a><a class="docs-heading-anchor-permalink" href="#Constraints" title="Permalink"></a></h4><p>One of the main features of MACRO is the ability to include constraints on the system from a pre-defined library of constraints. To include a constraint to a node, the user needs to add the constraint name to the <code>constraints</code> dictionary in the node&#39;s <code>global_data</code> or <code>instance_data</code> field.</p><p>For example, to include the <code>BalanceConstraint</code> to the node <code>elec_SE</code>, the user needs to add the following to the <code>nodes.json</code> file:</p><pre><code class="language-json hljs">&quot;constraints&quot;: {
    &quot;BalanceConstraint&quot;: true
}</code></pre><p>With the <code>BalanceConstraint</code>, the model will ensure that the sum of the supply and demand at each node and each time step is zero.</p><p>Another example is the <code>MaxNonServedDemandConstraint</code>, which limits the maximum amount of demand that can be unmet in a given time step. To include this constraint to the node <code>elec_SE</code>, the user needs to add the following to the <code>nodes.json</code> file:</p><pre><code class="language-json hljs">&quot;max_nds&quot;: [1],  // units: fraction of the demand
&quot;price_nsd&quot;: [5000.0], // units: $/MWh
&quot;constraints&quot;: {
    &quot;MaxNonServedDemandConstraint&quot;: true,
    &quot;MaxNonServedDemandPerSegmentConstraint&quot;: true
}</code></pre><p>This will add the <code>MaxNonServedDemandConstraint</code> and the <code>MaxNonServedDemandPerSegmentConstraint</code> to the node <code>elec_SE</code> with a maximum non-served demand equal to the demand in each period, and a price of 5000.0 <span>$</span>/MWh for the unmet demand (&quot;max_nds&quot; is the fraction of the demand that can be unmet). </p><p>A complete list of the constraints available in MACRO can be found in the <a href="../User Guide/constraints.html#MACRO-Constraint-Library">MACRO Constraint Library</a> section.</p><p>Therefore, a complete example of the <code>nodes.json</code> file for the electricity system is the following:</p><pre><code class="language-json hljs">{
    &quot;type&quot;: &quot;Electricity&quot;,
    &quot;global_data&quot;: {
        &quot;time_interval&quot;: &quot;Electricity&quot;,
        &quot;max_nsd&quot;: [
            1   // units: fraction of the demand
        ],
        &quot;price_nsd&quot;: [
            5000.0 // units: $/MWh
        ],
        &quot;constraints&quot;: {
            &quot;BalanceConstraint&quot;: true,
            &quot;MaxNonServedDemandConstraint&quot;: true,
            &quot;MaxNonServedDemandPerSegmentConstraint&quot;: true
        }
    },
    &quot;instance_data&quot;: [
        {
            &quot;id&quot;: &quot;elec_SE&quot;,
            &quot;demand&quot;: {
                &quot;timeseries&quot;: {
                    &quot;path&quot;: &quot;system/demand.csv&quot;,
                    &quot;header&quot;: &quot;Demand_MW_z1&quot;
                }
            }
        },
        {
            &quot;id&quot;: &quot;elec_MIDAT&quot;,
            &quot;demand&quot;: {
                &quot;timeseries&quot;: {
                    &quot;path&quot;: &quot;system/demand.csv&quot;,
                    &quot;header&quot;: &quot;Demand_MW_z2&quot;
                }
            }
        },
        {
            &quot;id&quot;: &quot;elec_NE&quot;,
            &quot;demand&quot;: {
                &quot;timeseries&quot;: {
                    &quot;path&quot;: &quot;system/demand.csv&quot;,
                    &quot;header&quot;: &quot;Demand_MW_z3&quot;
                }
            }
        }
    ]
}</code></pre><h4 id="Time-series-data"><a class="docs-heading-anchor" href="#Time-series-data">Time series data</a><a id="Time-series-data-1"></a><a class="docs-heading-anchor-permalink" href="#Time-series-data" title="Permalink"></a></h4><p>The time series data for the demand and fuel prices are CSV files with the same format:</p><ul><li>First column: time step</li><li>Second column and following: value of the time series for each time step</li></ul><p>For example, the <code>demand.csv</code> file has the following structure:</p><pre><code class="language-julia hljs">using CSV, DataFrames
demand_data = CSV.read(&quot;one_zone_electricity_only/system/demand.csv&quot;, DataFrame)
first(demand_data, 10)</code></pre><p>And the <code>fuel_prices.csv</code> file has a similar structure:</p><pre><code class="language-julia hljs">fuel_prices_data = CSV.read(&quot;one_zone_electricity_only/system/fuel_prices.csv&quot;, DataFrame)
first(fuel_prices_data, 10)</code></pre><p>where the names of the columns must match the <code>header</code> field in the <code>nodes.json</code> file for the corresponding node.</p><p>The units are <code>USD/MWh</code> of natural gas.</p><h2 id="Assets/technologies"><a class="docs-heading-anchor" href="#Assets/technologies">Assets/technologies</a><a id="Assets/technologies-1"></a><a class="docs-heading-anchor-permalink" href="#Assets/technologies" title="Permalink"></a></h2><p>The assets folder contains all the input files for the assets/resources as well as transmission lines and storage technologies that are included in the system.</p><p>Each asset or technology is defined in a separate file, and all files share a similar structure, which closely resembles the structure of the nodes in the <code>nodes.json</code> file. Each asset or technology includes the following fields:</p><ul><li><code>type</code>: The type of the asset or technology.</li><li><code>global_data</code>: Attributes that apply universally to all instances of this asset or technology.</li><li><code>instance_data</code>: A list of specific instances of this asset or technology, where each instance contains:<ul><li><code>id</code>: A unique identifier for the asset or technology.</li></ul></li></ul><p>Similarly to the nodes, all the fields defined in the <code>global_data</code> will be shared by all the instances of the asset/technology, and the fields defined in <code>instance_data</code> can be different for each instance.</p><p><strong>Note:</strong> To understand the structure of the attributes in both <code>global_data</code> and <code>instance_data</code>, the user can refer to the asset definitions in the <a href="../User Guide/assets/introduction.html#MACRO-Asset-Library">MACRO Asset Library</a> section. </p><p>To familiarize with the structure of the asset/technology input files, let&#39;s now see an example of a <strong>system</strong> with:</p><ul><li>a natural gas power plant, </li><li>a solar photovoltaic pannel, </li><li>a wind turbine, </li><li>a battery.</li></ul><h3 id="Natural-gas-power-plant"><a class="docs-heading-anchor" href="#Natural-gas-power-plant">Natural gas power plant</a><a id="Natural-gas-power-plant-1"></a><a class="docs-heading-anchor-permalink" href="#Natural-gas-power-plant" title="Permalink"></a></h3><h4 id="Type-representation"><a class="docs-heading-anchor" href="#Type-representation">Type representation</a><a id="Type-representation-1"></a><a class="docs-heading-anchor-permalink" href="#Type-representation" title="Permalink"></a></h4><p>The type that defines the natural gas power plant is <code>ThermalPower</code> and can be found in <code>src/model/assets/thermalpower.jl</code>.  Here is a schematic representation of the type:</p><p><img src="../images/thermalpower.png" alt="ThermalPower"/></p><p>As expected, a natural gas power plant is made of the followning components:</p><ul><li><strong>ng → elec transformation</strong>: a transformation object that defines the conversion of the fuel to electricity</li><li>three edges that connect the asset to the rest of the system:<ul><li><strong>fuel edge</strong>: natural gas input</li><li><strong>electricity edge</strong>: electricity output</li><li><strong>co2 edge</strong>: CO2 output</li></ul></li></ul><p>Keeping the type representation in mind, we can now see how the asset is defined in the <code>src/model/assets/thermalpower.jl</code> file:</p><pre><code class="language-julia hljs">struct ThermalPower{T} &lt;: AbstractAsset
    id::AssetId
    thermal_transform::Transformation
    elec_edge::Union{Edge{Electricity},EdgeWithUC{Electricity}}
    fuel_edge::Edge{T}
    co2_edge::Edge{CO2}
end</code></pre><p>In the object above, the <code>id</code> field is a unique identifier for the asset/technology, and the rest of the fields are the implementation of the transformation and the three edges that we saw before in the type representation.</p><h4 id="Asset-input-file"><a class="docs-heading-anchor" href="#Asset-input-file">Asset input file</a><a id="Asset-input-file-1"></a><a class="docs-heading-anchor-permalink" href="#Asset-input-file" title="Permalink"></a></h4><p>The input file for the natural gas power plant is <code>one_zone/assets/naturalgas_power.json</code>. If we open the file, we can notice that, apart from the <code>id</code> field, the rest of the fields match the ones we saw in the type representation:</p><pre><code class="language-json hljs">{
    &quot;transforms&quot;:{
        // ... thermal_transform fields ...
    },
    &quot;edges&quot;:{
        &quot;elec_edge&quot;: {
            // ... elec_edge fields ...
        },
        &quot;fuel_edge&quot;: {
            // ... fuel_edge fields ...
        },
        &quot;co2_edge&quot;: {
            // ... co2_edge fields ...
        }
    }
}</code></pre><p>Some important attributes for the <code>transforms</code> field are:</p><ul><li><code>timedata</code>: time resolution for the time series in the transformation (needs to match one of the commodities in the <code>time_data.json</code> file)</li><li><code>constraints</code>: constraints to be applied to the transformation</li><li><code>emission_rate</code>: emission rate of the transformation (tons of CO2/MWh of natural gas)</li><li><code>efficiency_rate</code>: efficiency rate of the transformation (MWh of electricity/MWh of natural gas)</li></ul><p>For the <code>edges</code> field, some important attributes are:</p><ul><li><code>type</code>: type of the commodity in the edge</li><li><code>start_vertex</code>: start vertex of the edge</li><li><code>end_vertex</code>: end vertex of the edge</li><li><code>unidirectional</code>: whether the edge is unidirectional or bidirectional</li><li><code>has_capacity</code>: whether the edge can expand during the optimization</li><li><code>uc</code>: whether the edge is a unit commitment variable</li><li><code>constraints</code>: constraints to be applied to the edge</li><li><code>investment_cost/fixed_om_cost/variable_om_cost</code>: investment, fixed, and variable operating costs for the asset</li><li><code>existing_capacity</code>: existing capacity of the asset</li></ul><p>The complete list of fields that can be included in each of the fields <code>transforms</code>, <code>elec_edge</code>, <code>fuel_edge</code>, and <code>co2_edge</code> can be found in the definition of the <code>Edge</code> type in the <code>Macro.Edge</code>(@ref), <code>Macro.EdgeWithUC</code>(@ref), and <code>Transformation</code> type in the <code>Macro.Transformation</code>(@ref) files.</p><p>For example, the following is a complete example of the <code>naturalgas_power.json</code> file:</p><pre><code class="language-json hljs">{
    &quot;NaturalGasPower&quot;: [
        {
            &quot;type&quot;: &quot;ThermalPower&quot;,
            &quot;global_data&quot;: {
                &quot;transforms&quot;: {
                    &quot;timedata&quot;: &quot;NaturalGas&quot;,
                    &quot;constraints&quot;: {
                        &quot;BalanceConstraint&quot;: true
                    }
                },
                &quot;edges&quot; : {
                    &quot;elec_edge&quot;: {
                        &quot;type&quot;: &quot;Electricity&quot;,
                        &quot;unidirectional&quot;: true,
                        &quot;has_capacity&quot;: true,
                        &quot;uc&quot;: true,
                        &quot;integer_decisions&quot;: false,
                        &quot;constraints&quot;: {
                            &quot;CapacityConstraint&quot;: true,
                            &quot;RampingLimitConstraint&quot;: true,
                            &quot;MinFlowConstraint&quot;: true,
                            &quot;MinUpTimeConstraint&quot;: true,
                            &quot;MinDownTimeConstraint&quot;: true
                        }
                    },
                    &quot;fuel_edge&quot;: {
                        &quot;type&quot;: &quot;NaturalGas&quot;,
                        &quot;unidirectional&quot;: true,
                        &quot;has_capacity&quot;: false
                    },
                    &quot;co2_edge&quot;: {
                        &quot;type&quot;: &quot;CO2&quot;,
                        &quot;unidirectional&quot;: true,
                        &quot;has_capacity&quot;: false,
                        &quot;end_vertex&quot;: &quot;co2_sink&quot;
                    }
                }
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;SE_naturalgas_ccavgcf_moderate_0&quot;,
                    &quot;transforms&quot;:{
                        &quot;emission_rate&quot;: 0.181048235160161, // units: tons of CO2/MWh of natural gas
                        &quot;efficiency_rate&quot;: 0.53624731 // units: MWh of electricity/MWh of natural gas
                    },
                    &quot;edges&quot;:{
                        &quot;elec_edge&quot;: {
                            &quot;end_vertex&quot;: &quot;elec_SE&quot;,
                            &quot;can_retire&quot;: true,
                            &quot;can_expand&quot;: true,
                            &quot;existing_capacity&quot;: 0.0,
                            &quot;investment_cost&quot;: 78218.72932, // units: $/MW/year (annualized)
                            &quot;fixed_om_cost&quot;: 27300, // units: $/MW/year (annualized)
                            &quot;variable_om_cost&quot;: 1.74, // units: $/MWh
                            &quot;capacity_size&quot;: 573, 
                            &quot;startup_cost&quot;: 61, // units: $/MW per start
                            &quot;startup_fuel&quot;: 0.058614214,  // units: MWh/MW of capacity per start                   
                            &quot;min_up_time&quot;: 4, // units: hours
                            &quot;min_down_time&quot;: 4, // units: hours
                            &quot;ramp_up_fraction&quot;: 1, // units: fraction of the capacity
                            &quot;ramp_down_fraction&quot;: 1, // units: fraction of the capacity
                            &quot;min_flow_fraction&quot;: 0.3 // units: fraction of the capacity
                        },
                        &quot;fuel_edge&quot;: {
                            &quot;start_vertex&quot;: &quot;natgas_SE&quot;
                        }
                    }
                }
            ]
        }
    ]
}</code></pre><div class="admonition is-category-error"><header class="admonition-header">Remove comments from JSON files</header><div class="admonition-body"><p>The comments in the JSON file above are only for the user&#39;s reference and should be removed before using them as input for a MACRO case.</p></div></div><h3 id="Solar-photovoltaic-pannel-and-wind-turbine"><a class="docs-heading-anchor" href="#Solar-photovoltaic-pannel-and-wind-turbine">Solar photovoltaic pannel and wind turbine</a><a id="Solar-photovoltaic-pannel-and-wind-turbine-1"></a><a class="docs-heading-anchor-permalink" href="#Solar-photovoltaic-pannel-and-wind-turbine" title="Permalink"></a></h3><p>Since the solar photovoltaic pannel and the wind turbine are very similar, the type that defines them is called <code>Vre</code> and can be found in <code>src/model/assets/vre.jl</code>.  Here is a schematic representation of the type:</p><p><img src="../images/vre.png" alt="Vre"/></p><p>As can be seen, a solar photovoltaic pannel and a wind turbine are made of the following components:</p><ul><li><strong>solar/wind energy → electricity transformation</strong>: a transformation object that defines the conversion of the energy to electricity</li><li>single edge that connects the asset to the rest of the system:<ul><li><strong>electricity edge</strong>: electricity output</li></ul></li></ul><p>The asset is therefore defined as follows:</p><pre><code class="language-julia hljs">struct VRE &lt;: AbstractAsset
    id::AssetId
    energy_transform::Transformation
    elec_edge::Edge{Electricity}
end</code></pre><p>The input file for variable renewable resources is <code>one_zone/assets/solar_pv.json</code>. If we open the file, we can notice the usual structure for nodes and assets that we should be familiar with by now:</p><ul><li><strong>type</strong>: type of the asset/technology</li><li><strong>global_data</strong>: settings that apply to all instances of this asset/technology</li><li><strong>instance_data</strong>: a list of specific assets/technologies of this type, each with:<ul><li><code>id</code>: a unique identifier for the asset/technology</li></ul></li></ul><p>In the <code>global_data</code> and <code>instance_data</code> fields, we can notice that we have a <code>transforms</code> field that contains the attributes for the <code>energy_transform</code> object, and an <code>edges</code> field that contains the attributes for the <code>edge</code> object that connects the asset to the electricity network:</p><pre><code class="language-json hljs">&quot;transforms&quot;: {
    // ... energy_transform fields ...
}
&quot;edges&quot;: {
    // ... edge fields ...
}</code></pre><p>For example, the following is a complete example of the <code>vre.json</code> file that defines a solar pv and a wind turbine:</p><pre><code class="language-json hljs">{
    &quot;vre&quot;: [
        {
            &quot;type&quot;: &quot;VRE&quot;,
            &quot;global_data&quot;: {
                &quot;transforms&quot;: {
                    &quot;timedata&quot;: &quot;Electricity&quot;
                },
                &quot;edges&quot;: {
                    &quot;elec_edge&quot;: {
                        &quot;type&quot;: &quot;Electricity&quot;,
                        &quot;unidirectional&quot;: true,
                        &quot;can_expand&quot;: true,
                        &quot;can_retire&quot;: false,
                        &quot;has_capacity&quot;: true,
                        &quot;constraints&quot;: {
                            &quot;CapacityConstraint&quot;: true
                        }
                    }
                }
            },
            &quot;instance_data&quot;: [
                {
                    &quot;id&quot;: &quot;SE_utilitypv_class1_moderate_70_0_2_1&quot;,
                    &quot;edges&quot;: {
                        &quot;elec_edge&quot;: {
                            &quot;fixed_om_cost&quot;: 15390.48615,
                            &quot;investment_cost&quot;: 49950.17548,
                            &quot;end_vertex&quot;: &quot;elec_SE&quot;,
                            &quot;availability&quot;: {
                                &quot;timeseries&quot;: {
                                    &quot;path&quot;: &quot;assets/availability.csv&quot;,
                                    &quot;header&quot;: &quot;SE_utilitypv_class1_moderate_70_0_2_1&quot;
                                }
                            }
                        }
                    }
                },
                {
                    &quot;id&quot;: &quot;SE_landbasedwind_class4_moderate_70_1&quot;,
                    &quot;edges&quot;: {
                        &quot;elec_edge&quot;: {
                            &quot;fixed_om_cost&quot;: 34568.125,
                            &quot;investment_cost&quot;: 68099.00274,
                            &quot;end_vertex&quot;: &quot;elec_SE&quot;,
                            &quot;availability&quot;: {
                                &quot;timeseries&quot;: {
                                    &quot;path&quot;: &quot;assets/availability.csv&quot;,
                                    &quot;header&quot;: &quot;SE_landbasedwind_class4_moderate_70_1&quot;
                                }
                            }
                        }
                    },
                }
            ]
        }
    ]
}</code></pre><p>Something to notice is that the <code>availability</code> field is a time series that needs to be provided for each instance of the <code>VRE</code>asset. This time series describes the availability of the resource at each time step. This attribute looks very similar to the <code>demand</code> field in the nodes input file, where the <code>path</code> field is used to link to the time series data in a csv file, and the <code>header</code> field is used to match the column name in the file.</p><p>This is an example of the <code>availability.csv</code> file:</p><pre><code class="language-julia hljs">availability_data = CSV.read(&quot;one_zone_electricity_only/assets/availability.csv&quot;, DataFrame)
first(availability_data, 10)</code></pre><p>The units are <code>fraction of installed capacity</code>.</p><pre><code class="language-julia hljs">using Pkg; Pkg.add(&quot;Plots&quot;)
using Plots
p = Plots.plot(availability_data[:,1], availability_data[:,2], label=&quot;Solar PV&quot;, xlabel=&quot;Time (h)&quot;, ylabel=&quot;Availability&quot;)
Plots.plot!(p, availability_data[:,1], availability_data[:,3], label=&quot;Wind&quot;)</code></pre><h3 id="Battery-(Electricity)"><a class="docs-heading-anchor" href="#Battery-(Electricity)">Battery (Electricity)</a><a id="Battery-(Electricity)-1"></a><a class="docs-heading-anchor-permalink" href="#Battery-(Electricity)" title="Permalink"></a></h3><p>Finally, let&#39;s see how storage technologies are defined in MACRO and how to include them in the system.</p><p>A battery is defined by the following components:</p><ul><li><code>battery_storage</code></li><li><code>charge_edge</code>: a charge edge that connects the battery to the electricity network</li><li><code>discharge_edge</code>: a discharge edge that connects the battery to the electricity network</li></ul><p><img src="../images/battery.png" alt="Battery"/></p><p>The input file for the battery is <code>one_zone/assets/battery.json</code>. Again, if we open the file, we can recognize the usual structure for nodes and assets:</p><ul><li><strong>type</strong>: type of the asset/technology</li><li><strong>global_data</strong>: settings that apply to all instances of this asset/technology</li><li><strong>instance_data</strong>: a list of specific assets/technologies of this type, each with:<ul><li><code>id</code>: a unique identifier for the asset/technology</li></ul></li></ul><p>This is an example of the <code>battery.json</code> file: ```json {     &quot;elec<em>stor&quot;: [         {             &quot;type&quot;: &quot;Battery&quot;,             &quot;global</em>data&quot;: {                 &quot;edges&quot;: {                     &quot;discharge<em>edge&quot;: {                         &quot;type&quot;: &quot;Electricity&quot;,                         &quot;unidirectional&quot;: true,                         &quot;has</em>capacity&quot;: true,                         &quot;can<em>expand&quot;: true,                         &quot;can</em>retire&quot;: false,                         &quot;constraints&quot;: {                             &quot;CapacityConstraint&quot;: true,                             &quot;StorageDischargeLimitConstraint&quot;: true                         }                     },                     &quot;charge<em>edge&quot;: {                         &quot;type&quot;: &quot;Electricity&quot;,                         &quot;unidirectional&quot;: true,                         &quot;has</em>capacity&quot;: false                     }                 },                 &quot;storage&quot;: {                     &quot;commodity&quot;: &quot;Electricity&quot;,                     &quot;can<em>expand&quot;: true,                     &quot;can</em>retire&quot;: false,                     &quot;constraints&quot;: {                         &quot;StorageCapacityConstraint&quot;: true,                         &quot;StorageSymmetricCapacityConstraint&quot;: true,                         &quot;BalanceConstraint&quot;: true                     }                 }             },             &quot;instance<em>data&quot;: [                 {                     &quot;id&quot;: &quot;battery</em>SE&quot;,                     &quot;edges&quot;: {                         &quot;discharge<em>edge&quot;: {                             &quot;end</em>vertex&quot;: &quot;elec<em>SE&quot;,                             &quot;existing</em>capacity&quot; : 0.0,                             &quot;fixed<em>om</em>cost&quot; : 4536.98,                             &quot;investment<em>cost&quot;: 17239.56121,                             &quot;variable</em>om<em>cost&quot;: 0.15,                             &quot;efficiency&quot;: 0.92                         },                         &quot;charge</em>edge&quot;: {                             &quot;start<em>vertex&quot;: &quot;elec</em>SE&quot;,                             &quot;efficiency&quot;: 0.92,                             &quot;variable<em>om</em>cost&quot;: 0.15                         }                     },                     &quot;storage&quot;:{                         &quot;existing<em>capacity</em>storage&quot;: 0.0,                         &quot;fixed<em>om</em>cost<em>storage&quot;: 2541.19, // units: USD/MWh-year (annualized)                         &quot;investment</em>cost<em>storage&quot;: 9656.002735, // units: USD/MWh-year (annualized)                         &quot;max</em>duration&quot;: 10, // units: hours                         &quot;min_duration&quot;: 1 // units: hours                     }                 }             ]         }     ] }</p><p>Something to notice is that both the <code>edges</code> and <code>storage</code> fields contain a <code>constraints</code> field. This is an example of a constraint that can be applied to a battery:</p><ul><li><code>StorageCapacityConstraint</code>: ensures that the capacity of the battery is not exceeded</li><li><code>StorageSymmetricCapacityConstraint</code>: ensures that simultaneous charge and discharge do not exceed the capacity of the battery</li><li><code>BalanceConstraint</code>: ensures that the battery contributes to the demand balance of the system</li></ul><h2 id="Model-settings"><a class="docs-heading-anchor" href="#Model-settings">Model settings</a><a id="Model-settings-1"></a><a class="docs-heading-anchor-permalink" href="#Model-settings" title="Permalink"></a></h2><p>This folder contains the <code>macro_settings.json</code> file, which is used to set the model settings and tune the model. It currently contains only one setting:</p><ul><li><code>ScalingFactor = true/false</code>: if true, the model will scale the input data to the following units: MWh → GWh, tons → ktons, <span>$</span>\/MWh → M<span>$</span>\/GWh, <span>$</span>\/ton → M<span>$</span>\/kton</li></ul><h2 id="Summary"><a class="docs-heading-anchor" href="#Summary">Summary</a><a id="Summary-1"></a><a class="docs-heading-anchor-permalink" href="#Summary" title="Permalink"></a></h2><p>In this tutorial, we have seen how to define a system in MACRO by providing the input files in the <code>system</code> and <code>assets</code> folders. </p><ul><li>Almost all the files except for time series data are JSON files, which allow for a high degree of customization of the system. </li><li>Time series data are provided in CSV files, where the first column is the time step and the following columns are the time series for each node/asset.</li><li>Both nodes and assets have a similar structure:<ul><li><code>type</code>: type of the node/asset</li><li><code>global_data</code>: settings that apply to all instances of the node/asset</li><li><code>instance_data</code>: a list of specific nodes/assets of this type, each with:<ul><li><code>id</code>: a unique identifier for the node/asset</li></ul></li></ul>which allows to define multiple instances of the same node/asset type while sharing common settings through the <code>global_data</code> field.</li><li>Each asset is defined by a set of edges, transformations, and storage objects, which are defined in the <code>edges</code>, <code>transforms</code>, and <code>storage</code> fields respectively.</li><li>All the fields in the <code>global_data</code> and <code>instance_data</code> fields can be customized, and the complete list of fields that can be included in each of the fields <code>transforms</code>, <code>edges</code>, and <code>storage</code> can be found in the definition of the <code>Edge</code>, <code>Transformation</code>, and <code>Storage</code> types in the <code>Macro.Edge</code>(@ref), <code>Macro.Transformation</code>(@ref), and <code>Macro.Storage</code>(@ref) files.</li><li>All the constraints available in MACRO can be found in the <a href="../User Guide/constraints.html#MACRO-Constraint-Library">MACRO Constraint Library</a> section.</li><li>All the assets available in MACRO can be found in the <a href="../User Guide/assets/introduction.html#MACRO-Asset-Library">MACRO Asset Library</a> section, where each file contains the definition of the asset type. </li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="tutorial_0_getting_started.html">« Getting Started</a><a class="docs-footer-nextpage" href="tutorial_2_running_macro.html">Running Macro »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Thursday 30 January 2025 11:41">Thursday 30 January 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
